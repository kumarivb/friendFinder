<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>

    <!-- bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>

    <div class="container">
  
        <h2>Survey Questions</h2>

            <h3>Name (Required)</h3>
            <input type="text" class="form-control" id="userName" required>

            <h3>Link to Photo Image (Required)</h3>
            <input type="text" class="form-control" id="userPhoto" required>

            <h4>Are you more of a cat or dog person? 1 being total cat person and 5 being a total dog person.</h4>
            <select class="select" id="q1">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>Do you ever read the last chapter of a book first? 1 being never and 5 being every time.</h5>
            <select class="select" id="q2">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>When your vacuum can’t seem to suck something up and you pick it up to see what it is, how likely are you to just put it back on the floor and try to vacuum it up again? 1 being don’t do it and 5 being you’d do that every time.</h5>
            <select class="select" id="q3">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>How much cream cheese do you like on your bagel? 1 being a thin layer and 5 being a mountain of it.</h5>
            <select class="select" id="q4">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>Would you ever wear a Canadian tuxedo? 1 being never and 5 being you’d wear it at your wedding.</h5>
            <select class="select" id="q5">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>Would you ever box Mike Tyson if you got to wear a fully padded sumo suit? 1 being no way and 5 being sign me up!</h5>
            <select class="select" id="q6">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>Would you give up your phone for an entire year for $100,000? 1 NOPE and 5 being take it away.</h5>
            <select class="select" id="q7">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>Are you team Capt. Kirk or team Picard? 1 team Kirk all the way and 5 team Picard.</h5>
            <select class="select" id="q8">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>Would you rather have a giant snowball fight or a giant nerf gun battle? 1 being snowballs and 5 being nerf guns.</h5>
            <select class="select" id="q9">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

            <h5>Are you more of a Simpsons fan or Family Guy? 1 being Simpsons and 5 being Family Guy?</h5>
            <select class="select" id="q10">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>

        <hr>
        <button id="submit" type="button" data-toggle="modal" data-target="#showModal" class="btn btn-primary btn-lg btn-block">Submit</button>
    
    </div>

    <!-- Modal -->
    <div id="showModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
        
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="modal-name"></h4>
                </div>

                <div class="modal-body">
                    <img id="modal-image" src="" height="300px" weight="200px"/>
                </div>
            
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        
        </div>
    </div>
    
    <footer class="footer">
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/kumarivb/friendFinder">GitHub Repo</a></p>
        </div>
    </footer>



    <!-- javascript -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>

</html>

<!-- form submit HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">
    var name = $("#userName").val().trim();
    var image = $("#userPhoto").val().trim();

    $("#submit").on("click", function () {

    // Form validation
    function validateForm() {
        var isValid = true;
        $('.form-control').each(function () {
            if ($(this).val() === '')
                isValid = false;
        });

        $('.select').each(function () {

            if ($(this).val() === "")
                isValid = false
        })
        return isValid;
    }

    // If all required fields are filled
    if (validateForm() == true) {
        // Create an object for the user's data
        var userData = {
            name: $("#userName").val(),
            photo: $("#userPhoto").val(),
            scores:
            [$("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val(),
            ]
        }


        // Grab the URL of the website
        var currentURL = window.location.origin;

        // AJAX post the data to the friends API. 
        $.post(currentURL + "/api/friends", userData, function (data) {

            // Grab the result from the AJAX post so that the best match's name and photo are displayed.
            $("#modal-name").text("Best Match " + data.name);
            $('#modal-image').attr("src", data.photo);

            // // Show the modal with the best match 
            $("#showModal").modal('toggle');
        });
    }
    else {
        alert("Please fill out all fields before submitting!");
    }

    return false;
    });  

</script>